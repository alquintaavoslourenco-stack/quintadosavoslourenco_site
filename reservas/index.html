<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reservas · Quinta dos Avós Lourenço</title>
  <meta name="description" content="Faça o seu pedido de reserva na Quinta dos Avós Lourenço, alojamento rural na Sertã.">

  <!-- CSP igual ao site, com permissões para Formspree -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self';
    style-src  'self' 'unsafe-inline';
    img-src    'self' data:;
    font-src   'self' data:;
    connect-src 'self' https://formspree.io;
    base-uri   'self';
    form-action 'self' https://formspree.io;
    upgrade-insecure-requests;
  ">
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <!-- CSS principal do site -->
  <link rel="stylesheet" href="/css/style.css">

  <style>
    /* Estilos leves para o simulador (podes mover para /css/style.css) */
    .simulador{background:#fff; border:1px solid #e5e7eb; border-radius:14px; padding:16px; box-shadow:0 6px 16px rgba(0,0,0,.06); margin:24px 0}
    .sim-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    @media (max-width:800px){.sim-grid{grid-template-columns:1fr}}
    .sim-kpi{display:flex; flex-wrap:wrap; gap:10px; margin-top:8px}
    .sim-kpi .k{flex:1 1 120px; background:#fafafa; border:1px dashed #e5e7eb; border-radius:10px; padding:10px}
    .sim-kpi .k b{display:block; font-size:18px}
    .sim-total{margin-top:12px; padding:14px; border:1px solid #efe7df; border-radius:12px; background:linear-gradient(135deg,#fff,#faf7f2)}
    .sim-total .row{display:flex; justify-content:space-between; margin:6px 0}
    .sim-total .grand{font-weight:700; font-size:20px}
    .sim-actions{display:flex; flex-direction:column; gap:10px; margin-top:12px}
    .btn{appearance:none; border:0; background:#8b5e34; color:#fff; border-radius:10px; padding:10px 14px; cursor:pointer}
    .btn.secondary{background:#374151}
    .note{font-size:12px; color:#6b7280; margin-top:6px}
    .warn{color:#991b1b; font-size:13px}
    .consent-line{display:flex; align-items:center; gap:8px}
  </style>
</head>

<body class="page-reservas">
  <!-- Cabeçalho -->
  <header class="topbar">
    <div class="brand">
      <a href="/"><img src="/images/logo.png" alt="Quinta dos Avós Lourenço" class="logo"></a>
    </div>
    <button class="menu-toggle" aria-expanded="false" aria-label="Abrir menu">☰</button>
    <nav class="menu" aria-label="Navegação principal">
      <a href="/">Início</a>
      <a href="/sobre/">Sobre</a>
      <a href="/galeria/">Galeria</a>
      <a href="/contactos/">Contactos</a>
      <a href="/reservas/" class="active">Reservas</a>
    </nav>
  </header>

  <!-- Conteúdo -->
  <main class="section">
    <div class="container">
      <h1 style="text-align:center">Pedido de Reserva</h1>
      <p style="text-align:center">Use o simulador para verificar o valor estimado e enviar-nos o pedido.</p>

      <!-- Simulador de preços -->
      <section id="simulador-precos" class="simulador" aria-labelledby="sim-title">
        <h2 id="sim-title" style="margin-top:0">Simulador de preços</h2>

        <div class="sim-grid">
          <div>
            <label for="checkin">Check-in</label>
            <input id="checkin" name="checkin" type="date">
          </div>
          <div>
            <label for="checkout">Check-out</label>
            <input id="checkout" name="checkout" type="date">
          </div>
          <div>
            <label for="adultos">Adultos</label>
            <input id="adultos" name="adultos" type="number" min="1" max="7" value="2">
          </div>
          <div>
            <label for="criancas">Crianças</label>
            <input id="criancas" name="criancas" type="number" min="0" max="6" value="0">
          </div>
        </div>

        <p class="note">Regras: <strong>137€ / noite</strong> inclui <strong>1–2 pessoas</strong> (pequeno-almoço). Pessoas extra: <strong>+35€ / pessoa / noite</strong>. Mínimo <strong>2 noites</strong>, máximo <strong>30 noites</strong>, capacidade <strong>até 7 pessoas</strong>.</p>

        <div class="sim-kpi">
          <div class="k"><b id="k-noites">0</b><span>noites</span></div>
          <div class="k"><b id="k-base">137 €</b><span>base / noite</span></div>
          <div class="k"><b id="k-grupo">2</b><span>pessoas (total)</span></div>
        </div>

        <div class="sim-total" id="sim-total">
          <div class="row"><span>Noites</span><span id="bk-noites">0</span></div>
          <div class="row"><span>Base (1–2 pessoas)</span><span id="bk-base">137 € / noite</span></div>
          <div class="row"><span>Pessoas extra</span><span id="bk-extra">0 €</span></div>
          <div class="row"><span>Pequeno-almoço</span><span>Incluído</span></div>
          <div class="row" style="border-top:1px dashed #e5e7eb; padding-top:8px; margin-top:8px">
            <span class="grand">Total estimado</span>
            <span class="grand" id="bk-total">0 €</span>
          </div>
          <p id="sim-msg" class="warn" hidden></p>
        </div>

        <div class="sim-actions">
          <label class="consent-line">
            <input id="consent-terms" type="checkbox" required>
            <span>Li e aceito os <a href="/termos-e-condicoes/" target="_blank" rel="noopener">Termos e Condições</a>.</span>
          </label>
          <label class="consent-line">
            <input id="consent-privacy" type="checkbox" required>
            <span>Li e aceito a <a href="/politica-privacidade/" target="_blank" rel="noopener">Política de Privacidade</a>.</span>
          </label>

          <button id="sim-reservar" type="button" class="btn">Reservar agora</button>
        </div>
      </section>

      <hr>

      <h2 style="text-align:center">Outras formas de reservar</h2>
      <p style="text-align:center">
        <a href="https://www.airbnb.pt/rooms/875560493639889462" target="_blank" rel="noopener">Airbnb</a> ·
        <a href="https://www.booking.com/hotel/pt/quinta-dos-avos-lourenco.pt-pt.html" target="_blank" rel="noopener">Booking</a> ·
        <a href="https://wa.me/351960446713?text=Ol%C3%A1!%20Gostaria%20de%20saber%20disponibilidade."
           target="_blank" rel="noopener">WhatsApp</a>
      </p>
    </div>
  </main>

  <!-- Rodapé -->
  <footer class="footer">
    <p>
      © 2023–2025 Quinta dos Avós Lourenço · 135447/AL ·
      <a href="/politica-privacidade/">Política de Privacidade</a> ·
      <a href="/termos-e-condicoes/">Termos e Condições</a> ·
      <a href="https://www.livroreclamacoes.pt/Inicio/" target="_blank" rel="noopener noreferrer">Livro de Reclamações</a>
    </p>
  </footer>

  <!-- WhatsApp -->
  <a href="https://wa.me/351960446713?text=Ol%C3%A1!%20Gostaria%20de%20saber%20mais%20sobre%20a%20Quinta%20dos%20Av%C3%B3s%20Louren%C3%A7o."
     class="whatsapp-float" target="_blank" rel="noopener noreferrer"
     aria-label="Enviar mensagem no WhatsApp" title="Enviar mensagem no WhatsApp">
    <img src="/images/whatsapp-icon.svg" alt="WhatsApp">
  </a>

  <!-- Cookies -->
  <div id="cookie-consent" class="cookie-banner" role="dialog" aria-live="polite" hidden>
    <div class="cookie-inner">
      <p class="cookie-text">
        Usamos cookies apenas para garantir o bom funcionamento do site.
        <a href="/cookies/">Saiba mais</a>
      </p>
      <button id="cookie-accept" type="button" class="btn-accept">Aceitar</button>
    </div>
  </div>

  <!-- Scripts (deferred) -->
  <script defer src="/js/cookies.js"></script>
  <script defer src="/js/app.js"></script>
  <!-- reservas.js: faz o cálculo e envia para o mesmo Formspree (/f/xanllrjv) -->
  <script defer src="/js/reservas.js"></script>
</body>
</html>
